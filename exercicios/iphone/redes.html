<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iphone</title>

    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="https://img.icons8.com/m_rounded/512/FFFFFF/mac-os.png" type="image/x-icon">

</head>
<body>
    <main>
        <div id="celular">
            <div class="frontcam">

            </div>
            <div class="onoff">
                <button id="toggleBtn"></button>
            </div>
            <div id="redes" class="redes">
                <a class="link" href="redes/insta.html" target="tela" rel="next"><img class="rede" src="images/logo-instagram.jpg" alt=""></a>
                <a class="link" href="redes/youtube.html" target="tela" rel="next"><img class="rede" src="images/logo-youtube.jpg" alt=""></a>
                <a class="link" href="redes/github.html" target="tela" rel="next"><img class="rede" src="images/logo-github.jpg" alt=""></a>
                <a class="link" href="redes/facebook.html" target="tela" rel="next"><img class="rede" src="images/logo-facebook.jpg" alt=""></a>
                <a class="link" href="redes/twitter.html" target="tela" rel="next"><img class="rede" src="images/logo-twitter.jpg" alt=""></a>
            </div>
            <a class="linkhome" href="home.html" target="tela" rel="prev"><img class="homecelular" src="images/logo-home.jpg" alt=""></button></a>
            <img src="images/iframe-iphone[1].png" alt="">
            <iframe id="conteudo" src="home.html" name="tela" frameborder="0"></iframe>
        </div>
    </main>

    <script>
        const toggleBtn = document.getElementById('toggleBtn');
        const iframe = document.getElementById('conteudo');
        const redes = document.getElementById('redes');
        const links = document.querySelectorAll('.link');
        const linkHome = document.querySelector('.linkhome');

        let telaLigada = true;

        function ligarTela() {
            telaLigada = true;
            iframe.src = 'home.html';
            // A exibição das redes será tratada no iframe.onload
        }

        function desligarTela() {
            telaLigada = false;
            iframe.src = 'black.html';
            redes.style.display = 'none';
        }

        toggleBtn.addEventListener('click', () => {
            if (telaLigada) {
                desligarTela();
            } else {
                ligarTela();
            }
        });

        linkHome.addEventListener('click', (e) => {
            e.preventDefault();
            ligarTela(); // Usa a função correta, garante que telaLigada = true antes
        });

        links.forEach(link => {
            link.addEventListener('click', () => {
                redes.style.display = 'none';
            });
        });

        iframe.addEventListener('load', () => {
            try {
                const urlAtual = iframe.contentWindow.location.href;
                if (urlAtual.includes('home.html') && telaLigada) {
                    redes.style.display = 'flex';
                } else {
                    redes.style.display = 'none';
                }
            } catch (e) {
                // ignora erro de cross-origin
            }
        });
    </script>

</body>
</html>